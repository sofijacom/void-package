# Template file for 'vesktop'
pkgname=vesktop
version=1.5.8
revision=1
archs="x86_64"
hostmakedepends="tar"
short_desc="Vesktop is a custom Discord App aiming to give you better performance and improve linux support."
maintainer="Rickard <@>"
license="GNU General Public License v3.0"
homepage="https://github.com/Vencord/Vesktop"
distfiles="https://github.com/Vencord/Vesktop/releases/download/v${version}/vesktop-${version}.tar.gz"
checksum=c2ed2184da586c575f3dbf14afc41a85760693586b079b3d2b0ba8f181cd3d51

do_install() {
  install -dm755 "${DESTDIR}/opt/${pkgname}" "${DESTDIR}/usr/bin" "${DESTDIR}/usr/share/applications" "${DESTDIR}/usr/share/pixmaps"

  vinstall "${FILESDIR}/vesktop.desktop" 0644 usr/share/applications/

  vcopy * "opt/${pkgname}"

  ln -sf /opt/${pkgname}/vesktop "${DESTDIR}/usr/bin/vesktop"

  vinstall "${FILESDIR}/icons/vesktop48.png" 0644 usr/share/pixmaps "${pkgname}.png"
  for size in 16 32 48 64 128 256 512 1024; do
    install -d ${DESTDIR}/usr/share/icons/hicolor/${size}x${size}/apps
    vinstall "${FILESDIR}/icons/vesktop${size}.png" 0644 usr/share/icons/hicolor/${size}x${size}/apps vesktop.png
  done
}

post_install() {
  vlicense LICENSE.electron.txt
  vlicense LICENSES.chromium.html
}
